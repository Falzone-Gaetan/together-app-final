import{_ as w}from"./AppLayout-edf966f1.js";import{S as b}from"./SearchBar-742b07df.js";import{o as n,e as c,F as p,h as _,a as t,t as r,u as y,f as k,y as A,z as v,A as g,B as S,q as u,c as B,w as m,b as h}from"./app-4c15df97.js";import{f as D}from"./utils-5c2525d3.js";import"./_plugin-vue_export-helper-c27b6911.js";const $={class:"flex flex-nowrap overflow-x-auto gap-4 ml-2",style:{"scroll-snap-type":"x mandatory"}},C={class:"flex flex-col items-center"},j=["href"],P=["src"],N={class:"text-slate-200"},z={__name:"ListCategories",props:{categories:Array},setup(e){return(i,s)=>(n(),c("div",$,[(n(!0),c(p,null,_(e.categories,a=>(n(),c("div",{key:a.id},[t("div",C,[t("a",{href:i.route("index",{id:a.id}),class:"overflow-hidden rounded-full w-16 h-16"},[t("img",{src:"img/"+a.image,alt:"",class:"w-full h-full"},null,8,P)],8,j),t("span",N,r(a.name),1)])]))),128))]))}},L={class:"py-4 ml-4"},M={class:"container my-4"},V={class:"text-3xl font-bold mb-6 text-gray-100"},F={class:"flex overflow-x-auto"},E={class:"bg-cyan-900 rounded-lg bg-opacity-50 overflow-hidden shadow-lg"},O={class:"relative"},q=["src"],I={class:"absolute top-3 left-3 inline-block py-1 px-2 bg-gray-100 text-gray-700 rounded"},K={class:"absolute bottom-3 right-3 inline-block text-white text-xl font-bold"},R={class:"p-4"},T={class:"text-xl font-bold mb-2 text-gray-100"},G={class:"flex items-center mb-2"},H=A('<span class="text-green-500 mr-1"><i class="fas fa-map-marker-alt"></i></span><svg xmlns="http://www.w3.org/2000/svg" fill="green" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"></path><circle cx="12" cy="10" r="3"></circle></svg>',2),J={class:"text-green-500"},Q=t("span",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})])],-1),U={key:0},W={class:"text-gray-100 flex py-4"},X={class:"text-center pb-2"},Y=["href"],f={__name:"ListActivity",props:{data:Array,title:String},setup(e){const i=e,s=(a,l)=>{let o=a.split(" ");return o.slice(0,l).join(" ")+(o.length>l?" ...":"")};return(a,l)=>(n(),c("section",L,[t("div",M,[t("h2",V,r(e.title),1),t("div",F,[(n(!0),c(p,null,_(i.data,o=>(n(),c("article",{key:o.id,class:"shrink-0 w-2/3 md:w-1/5 lg:w-1/5 xl:w-1/5 pr-4 drop-shadow-xl pb-6"},[t("div",E,[t("div",O,[t("img",{class:"w-full h-48 object-cover",src:"img/"+o.image,alt:"Activity Cover"},null,8,q),t("span",I,r(o.category.name),1),t("span",K,r(y(D)(o.date)),1)]),t("div",R,[t("h3",T,r(s(o.name,2)),1),t("div",G,[H,t("span",J,r(o.location)+" - "+r(o.distance.toFixed(0))+"Km",1)]),(n(!0),c(p,null,_(o.user,d=>(n(),c("p",{class:"text-gray-100 flex",key:d.id},[Q,d.pivot.is_owner===1?(n(),c("span",U,r(d.name),1)):k("",!0)]))),128)),t("p",W,[t("span",null," Nombre de participant: "+r(o.user.length),1)]),t("div",X,[t("a",{href:a.route("activities.show",{id:o.id}),class:"inline-block mt-4 bg-green-500 hover:bg-green-950 rounded-full px-10 py-1 text-white"},"Infos",8,Y)])])])]))),128))])])]))}},x=v({id:"location",state:()=>({position:null}),actions:{async fetchPosition(){try{const e=await new Promise((i,s)=>{navigator.geolocation.getCurrentPosition(i,s)});this.setPosition(e)}catch(e){console.error("Error fetching user position:",e)}},setPosition(e){this.position=e}}}),Z=v({id:"activities",state:()=>({activities:[],categories:[]}),getters:{getActivitiesSortedByDistance:e=>e.activities.slice().sort((i,s)=>i.distance-s.distance),getActivitiesSortedByDate:e=>e.activities.slice().sort((i,s)=>new Date(i.date)-new Date(s.date))},actions:{async fetchActivities(){const e=x(),{latitude:i,longitude:s}=e.position.coords;if(!i||!s)return;const a=await g.get("api/activities",{params:{latitude:i,longitude:s}}),l=await g.get("api/categories");this.categories=Object.values(l.data),this.activities=Object.values(a.data)}}}),rt={__name:"Dashboard",setup(e){const i=x(),s=Z();async function a(){await i.fetchPosition(),await s.fetchActivities()}S(a);const l=u(()=>s.getActivitiesSortedByDistance),o=u(()=>s.getActivitiesSortedByDate),d=u(()=>s.categories);return(tt,et)=>(n(),B(w,{title:"Together"},{header:m(()=>[h(b)]),default:m(()=>[h(z,{categories:d.value},null,8,["categories"]),h(f,{data:l.value,title:"Activités à proximité"},null,8,["data"]),h(f,{data:o.value,title:"Activités à venir"},null,8,["data"])]),_:1}))}};export{rt as default};
